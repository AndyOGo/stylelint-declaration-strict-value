var e=require("stylelint"),t=require("shortcss"),n=require("shortcss/lib/list.js"),r=require("css-values"),o=require("path"),s=require("node:process");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=/*#__PURE__*/i(e),l=/*#__PURE__*/i(t),u=/*#__PURE__*/i(n),c=/*#__PURE__*/i(r),f=/*#__PURE__*/i(o),p=/*#__PURE__*/i(s);const d="scale-unlimited/declaration-strict-value",y=(e,t)=>"object"==typeof e&&Object.hasOwnProperty.call(e,t),g={ignoreVariables:!0,ignoreFunctions:!0,ignoreKeywords:null,ignoreValues:null,expandShorthand:!1,recurseLonghand:!1,severity:"error",message:void 0,disableFix:!1,autoFixFunc:null};function x(e){const t=typeof e;return"string"===t||"number"===t}function h(e){return x(e)||Array.isArray(e)&&e.every(e=>x(e))}function b(e){return!("object"!=typeof e||!e)&&Object.keys(e).every(t=>h(e[t]))}function m(e){return!("object"!=typeof e||!e)&&Object.keys(e).every(t=>"boolean"==typeof e[t])}function v(e){if("object"!=typeof e)return!1;const t=Object.keys(g);return!(!Object.keys(e).every(e=>t.indexOf(e)>-1)||"ignoreVariables"in e&&"boolean"!=typeof e.ignoreVariables&&!m(e.ignoreVariables)&&null!==e.ignoreVariables||"ignoreFunctions"in e&&"boolean"!=typeof e.ignoreFunctions&&!m(e.ignoreFunctions)&&null!==e.ignoreFunctions||"severity"in e&&"string"!=typeof e.severity&&null!==e.severity||"ignoreKeywords"in e&&!h(e.ignoreKeywords)&&!b(e.ignoreKeywords)||"ignoreValues"in e&&!h(e.ignoreValues)&&!b(e.ignoreValues)||"expandShorthand"in e&&"boolean"!=typeof e.expandShorthand&&null!==e.expandShorthand||"recurseLonghand"in e&&"boolean"!=typeof e.recurseLonghand&&null!==e.recurseLonghand||"message"in e&&"string"!=typeof e.message&&null!==e.message||"disableFix"in e&&"boolean"!=typeof e.disableFix&&null!==e.disableFix||"autoFixFunc"in e&&"function"!=typeof e.autoFixFunc&&"string"!=typeof e.autoFixFunc&&null!==e.autoFixFunc)}function F(e){let t;if(Array.isArray(e)){const n=e.pop();t=e.length?`${e.join(", ")} or ${n}`:n}else t=e;return t}function $(e,t){return"boolean"==typeof e?e:"object"==typeof e&&e&&{}.hasOwnProperty.call(e,t)?e[t]:!!e}function w(e,t){if(!e)return null;let n=e;return y(n,t)?n=n[t]:y(n,"")&&(n=n[""]),Array.isArray(n)?n:[n]}function j(e,t){if(!e)return null;let n=e;return y(n,t)?n=n[t]:y(n,"")&&(n=n[""]),Array.isArray(n)?n:[n]}!function(){const e=p.default.emitWarning;p.default.emitWarning=function(){var t=[].slice.call(arguments);const[n,r]=t;r&&"object"==typeof r&&"DeprecationWarning"===r?.type&&r?.code?.startsWith("stylelint:")&&(n&&"string"==typeof n&&n?.includes(d)||r?.detail?.includes(d))||e.apply(p.default,t)}}();const{utils:A}=a.default,V={url:"https://github.com/AndyOGo/stylelint-declaration-strict-value/blob/master/README.md",fixable:!0},E=A.ruleMessages(d,{expected:function(e,t,n){return`Expected ${e} for "${t}" of "${n}"`},customExpected:function(e,t,n,r){return r.replace("${types}",e).replace("${value}",t).replace("${property}",n)},failedToFix:function(e,t,n){return e&&("string"==typeof e||e instanceof Error)?"string"==typeof e?e:e.message:`Property "${n}" with value "${t}" can't be autofixed`}}),O=/^(?:@|\$|--).+$/,k=/^-?(?:@.+|(?:(?:[a-zA-Z_-]|[^\x20-\x7F])+(?:[a-zA-Z0-9_-]|[^\x20-\x7F])*\.)?\$.+|var\(\s*--[\s\S]+\))$/,q=/^(?!var\(\s*--)[\s\S]+\([\s\S]*\)$/,S=/^\/(.*)\/([a-zA-Z]*)$/,R=/color/,K=e=>S.test(e),L=e=>{const[t,n]=(e=>e.match(S).slice(1))(e);return new RegExp(t,n)},M=e=>K(`${e}`)?L(`${e}`):new RegExp(`^${e}$`),N=(e,t,n={})=>(r,o)=>{if(o&&o.stylelint&&o.stylelint.customMessages&&o.stylelint.customMessages[d]&&delete o.stylelint.customMessages[d],!A.validateOptions(o,d,{actual:e,possible:h},{actual:t,possible:v,optional:!0}))return;Array.isArray(e)||(e=[e]);const s={...g,...t},{ignoreVariables:i,ignoreFunctions:a,ignoreKeywords:p,ignoreValues:y,message:x,disableFix:b,autoFixFunc:m,expandShorthand:V,recurseLonghand:S}=s,N=function(e,t,n){if("function"==typeof e)return e;if("string"==typeof e){let t;try{t=require.resolve(e)}catch(n){t=require.resolve(f.default.join(process.cwd(),e))}return require(t)}return!t&&n&&console.warn(`No \`autoFix\` function provided, consider using \`disableFix\` for "${d}"`),null}(m,b,n.fix),P=p?{}:null,W=y?{}:null;let z;if(i){const e=[];r.walkAtRules("value",t=>{const{params:n}=t,r=n.split(":")[0].trim();e.push(r)}),z=new RegExp(`^-?(:?${e.join("|")})$`)}e.forEach(e=>{let t=e;function f(t,l,u,f=!1){const{value:g,prop:h}=t,m=u||g;let v=!1,V=!1,O=!1,S=!1;if(i&&$(i,e)&&(v=k.test(m)||z.test(m)),a&&!v&&$(a,e)&&(V=q.test(m)),f&&(!i||i&&!v)&&(!a||a&&!V)&&!0!==((e,t)=>R.test(e)&&"transparent"===t||k.test(t)||q.test(t)||c.default(e,t))(l,u))return!1;if(p&&(!v||!V)){let t=P[e];if(!t){const n=w(p,e);n&&(t=new RegExp(`^${n.join("$|^")}$`),P[e]=t)}t&&(O=t.test(m))}if(y&&(!v||!V||!O)){let t=W[e];if(!t){const n=j(y,e);n&&(t=n.map(M),W[e]=t)}t&&(S=t.filter(e=>e.test(m)).length>0)}if(!(v||V||O||S)){const i=function(e,t){const{ignoreVariables:n,ignoreFunctions:r,ignoreKeywords:o,ignoreValues:s}=e,i=[];return n&&i.push("variable"),r&&i.push("function"),o&&w(o,t)&&i.push("keyword"),-1===i.indexOf("keyword")&&s&&j(s,t)&&i.push("keyword"),i}(s,e);if(n.fix&&!b&&N)try{const e=N(t,{validVar:v,validFunc:V,validKeyword:O,validValue:S,longhandProp:l,longhandValue:u},r,s);e&&(t.value=e)}catch(e){const{raws:n}=t,r=t.source.start;A.report({ruleName:d,result:o,node:t,line:r.line,column:r.column+h.length+n.between.length,message:E.failedToFix(e,m,h)})}else{const{raws:e}=t,n=t.source.start;A.report({ruleName:d,result:o,node:t,line:n.line,column:n.column+h.length+e.between.length,message:x?E.customExpected(F(i),m,h,x):E.expected(F(i),m,h)})}return!0}return!1}K(t)&&(t=L(t)),r.walkDecls(function(e){const{value:n,prop:r}=e;if(O.test(r))return;const o=V&&l.default.isShorthand(r);if(r===t||!o&&t instanceof RegExp&&t.test(r)){const t=u.default.space(n);if(t.length>1){let n=!1;t.forEach(t=>{n||(n=f(e,r,t))})}else f(e)}else if(o){const o=l.default.expand(r,n,S);let s=!1;Object.keys(o).forEach(n=>{const r=o[n];!s&&(n===t||t instanceof RegExp&&t.test(n))&&(s=f(e,n,r,!0))})}})})};N.primaryOptionArray=!0,N.ruleName=d,N.messages=E,N.meta=V;const P=a.default.createPlugin(d,N);exports.default=P,exports.messages=E,exports.meta=V,exports.rule=N,exports.ruleName=d;
//# sourceMappingURL=index.js.map
