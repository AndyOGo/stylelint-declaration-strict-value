var e=require("stylelint"),n=require("shortcss"),t=require("shortcss/lib/list"),r=require("css-values"),o=require("path");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=/*#__PURE__*/s(e),a=/*#__PURE__*/s(n),l=/*#__PURE__*/s(t),u=/*#__PURE__*/s(r),c=/*#__PURE__*/s(o);const f="scale-unlimited/declaration-strict-value",p=(e,n)=>"object"==typeof e&&Object.hasOwnProperty.call(e,n),d={ignoreVariables:!0,ignoreFunctions:!0,ignoreKeywords:null,ignoreValues:null,expandShorthand:!1,recurseLonghand:!1,severity:"error",message:void 0,disableFix:!1,autoFixFunc:null};function g(e){const n=typeof e;return"string"===n||"number"===n}function y(e){return g(e)||Array.isArray(e)&&e.every(e=>g(e))}function x(e){return!("object"!=typeof e||!e)&&Object.keys(e).every(n=>y(e[n]))}function h(e){return!("object"!=typeof e||!e)&&Object.keys(e).every(n=>"boolean"==typeof e[n])}function b(e){if("object"!=typeof e)return!1;const n=Object.keys(d);return!(!Object.keys(e).every(e=>n.indexOf(e)>-1)||"ignoreVariables"in e&&"boolean"!=typeof e.ignoreVariables&&!h(e.ignoreVariables)&&null!==e.ignoreVariables||"ignoreFunctions"in e&&"boolean"!=typeof e.ignoreFunctions&&!h(e.ignoreFunctions)&&null!==e.ignoreFunctions||"severity"in e&&"string"!=typeof e.severity&&null!==e.severity||"ignoreKeywords"in e&&!y(e.ignoreKeywords)&&!x(e.ignoreKeywords)||"ignoreValues"in e&&!y(e.ignoreValues)&&!x(e.ignoreValues)||"expandShorthand"in e&&"boolean"!=typeof e.expandShorthand&&null!==e.expandShorthand||"recurseLonghand"in e&&"boolean"!=typeof e.recurseLonghand&&null!==e.recurseLonghand||"message"in e&&"string"!=typeof e.message&&null!==e.message||"disableFix"in e&&"boolean"!=typeof e.disableFix&&null!==e.disableFix||"autoFixFunc"in e&&"function"!=typeof e.autoFixFunc&&"string"!=typeof e.autoFixFunc&&null!==e.autoFixFunc)}function F(e){let n;if(Array.isArray(e)){const t=e.pop();n=e.length?`${e.join(", ")} or ${t}`:t}else n=e;return n}function m(e,n){return"boolean"==typeof e?e:"object"==typeof e&&e&&{}.hasOwnProperty.call(e,n)?e[n]:!!e}function v(e,n){if(!e)return null;let t=e;return p(t,n)?t=t[n]:p(t,"")&&(t=t[""]),Array.isArray(t)?t:[t]}function $(e,n){if(!e)return null;let t=e;return p(t,n)?t=t[n]:p(t,"")&&(t=t[""]),Array.isArray(t)?t:[t]}const{utils:w}=i.default,j=w.ruleMessages(f,{expected:function(e,n,t){return`Expected ${e} for "${n}" of "${t}"`},customExpected:function(e,n,t,r){return r.replace("${types}",e).replace("${value}",n).replace("${property}",t)},failedToFix:function(e,n,t){return e&&("string"==typeof e||e instanceof Error)?"string"==typeof e?e:e.message:`Property "${t}" with value "${n}" can't be autofixed`}}),V=/^(?:@|\$|--).+$/,A=/^-?(?:@.+|(?:(?:[a-zA-Z_-]|[^\x20-\x7F])+(?:[a-zA-Z0-9_-]|[^\x20-\x7F])*\.)?\$.+|var\(\s*--[\s\S]+\))$/,E=/^(?!var\(\s*--)[\s\S]+\([\s\S]*\)$/,O=/^\/(.*)\/([a-zA-Z]*)$/,k=/color/,S=e=>O.test(e),q=e=>{const[n,t]=(e=>e.match(O).slice(1))(e);return new RegExp(n,t)},K=e=>S(`${e}`)?q(`${e}`):new RegExp(`^${e}$`),R=(e,n,t={})=>(r,o)=>{if(o&&o.stylelint&&o.stylelint.customMessages&&o.stylelint.customMessages[f]&&delete o.stylelint.customMessages[f],!w.validateOptions(o,f,{actual:e,possible:y},{actual:n,possible:b,optional:!0}))return;Array.isArray(e)||(e=[e]);const s={...d,...n},{ignoreVariables:i,ignoreFunctions:p,ignoreKeywords:g,ignoreValues:x,message:h,disableFix:O,autoFixFunc:R,expandShorthand:L,recurseLonghand:N}=s,P=function(e,n,t){if("function"==typeof e)return e;if("string"==typeof e){let n;try{n=require.resolve(e)}catch(t){n=require.resolve(c.default.join(process.cwd(),e))}return require(n)}return!n&&t&&console.warn(`No \`autoFix\` function provided, consider using \`disableFix\` for "${f}"`),null}(R,O,t.fix),M=g?{}:null,z=x?{}:null;let Z;if(i){const e=[];r.walkAtRules("value",n=>{const{params:t}=n,r=t.split(":")[0].trim();e.push(r)}),Z=new RegExp(`^-?(:?${e.join("|")})$`)}e.forEach(e=>{let n=e;function c(n,a,l,c=!1){const{value:d,prop:y}=n,b=l||d;let V=!1,S=!1,q=!1,R=!1;if(i&&m(i,e)&&(V=A.test(b)||Z.test(b)),p&&!V&&m(p,e)&&(S=E.test(b)),c&&(!i||i&&!V)&&(!p||p&&!S)&&!0!==((e,n)=>k.test(e)&&"transparent"===n||A.test(n)||E.test(n)||u.default(e,n))(a,l))return!1;if(g&&(!V||!S)){let n=M[e];if(!n){const t=v(g,e);t&&(n=new RegExp(`^${t.join("$|^")}$`),M[e]=n)}n&&(q=n.test(b))}if(x&&(!V||!S||!q)){let n=z[e];if(!n){const t=$(x,e);t&&(n=t.map(K),z[e]=n)}n&&(R=n.filter(e=>e.test(b)).length>0)}if(!(V||S||q||R)){const i=function(e,n){const{ignoreVariables:t,ignoreFunctions:r,ignoreKeywords:o,ignoreValues:s}=e,i=[];return t&&i.push("variable"),r&&i.push("function"),o&&v(o,n)&&i.push("keyword"),-1===i.indexOf("keyword")&&s&&$(s,n)&&i.push("keyword"),i}(s,e);if(t.fix&&!O&&P)try{const e=P(n,{validVar:V,validFunc:S,validKeyword:q,validValue:R,longhandProp:a,longhandValue:l},r,s);e&&(n.value=e)}catch(e){const{raws:t}=n,r=n.source.start;w.report({ruleName:f,result:o,node:n,line:r.line,column:r.column+y.length+t.between.length,message:j.failedToFix(e,b,y)})}else{const{raws:e}=n,t=n.source.start;w.report({ruleName:f,result:o,node:n,line:t.line,column:t.column+y.length+e.between.length,message:h?j.customExpected(F(i),b,y,h):j.expected(F(i),b,y)})}return!0}return!1}S(n)&&(n=q(n)),r.walkDecls(function(e){const{value:t,prop:r}=e;if(V.test(r))return;const o=L&&a.default.isShorthand(r);if(r===n||!o&&n instanceof RegExp&&n.test(r)){const n=l.default.space(t);if(n.length>1){let t=!1;n.forEach(n=>{t||(t=c(e,r,n))})}else c(e)}else if(o){const o=a.default.expand(r,t,N);let s=!1;Object.keys(o).forEach(t=>{const r=o[t];!s&&(t===n||n instanceof RegExp&&n.test(t))&&(s=c(e,t,r,!0))})}})})};R.primaryOptionArray=!0,R.ruleName=f,R.messages=j;const L=i.default.createPlugin(f,R);exports.default=L,exports.messages=j,exports.ruleName=f;
//# sourceMappingURL=index.js.map
