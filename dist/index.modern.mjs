import e from"stylelint";import n from"shortcss";import t from"shortcss/lib/list.js";import r from"css-values";import o from"path";import s from"node:process";function i(){return i=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i.apply(this,arguments)}const l="scale-unlimited/declaration-strict-value",a=(e,n)=>"object"==typeof e&&Object.hasOwnProperty.call(e,n),u={ignoreVariables:!0,ignoreFunctions:!0,ignoreKeywords:null,ignoreValues:null,expandShorthand:!1,recurseLonghand:!1,severity:"error",message:void 0,disableFix:!1,autoFixFunc:null};function c(e){const n=typeof e;return"string"===n||"number"===n}function p(e){return c(e)||Array.isArray(e)&&e.every(e=>c(e))}function f(e){return!("object"!=typeof e||!e)&&Object.keys(e).every(n=>p(e[n]))}function y(e){return!("object"!=typeof e||!e)&&Object.keys(e).every(n=>"boolean"==typeof e[n])}function g(e){if("object"!=typeof e)return!1;const n=Object.keys(u);return!(!Object.keys(e).every(e=>n.indexOf(e)>-1)||"ignoreVariables"in e&&"boolean"!=typeof e.ignoreVariables&&!y(e.ignoreVariables)&&null!==e.ignoreVariables||"ignoreFunctions"in e&&"boolean"!=typeof e.ignoreFunctions&&!y(e.ignoreFunctions)&&null!==e.ignoreFunctions||"severity"in e&&"string"!=typeof e.severity&&null!==e.severity||"ignoreKeywords"in e&&!p(e.ignoreKeywords)&&!f(e.ignoreKeywords)||"ignoreValues"in e&&!p(e.ignoreValues)&&!f(e.ignoreValues)||"expandShorthand"in e&&"boolean"!=typeof e.expandShorthand&&null!==e.expandShorthand||"recurseLonghand"in e&&"boolean"!=typeof e.recurseLonghand&&null!==e.recurseLonghand||"message"in e&&"string"!=typeof e.message&&null!==e.message||"disableFix"in e&&"boolean"!=typeof e.disableFix&&null!==e.disableFix||"autoFixFunc"in e&&"function"!=typeof e.autoFixFunc&&"string"!=typeof e.autoFixFunc&&null!==e.autoFixFunc)}function d(e){let n;if(Array.isArray(e)){const t=e.pop();n=e.length?`${e.join(", ")} or ${t}`:t}else n=e;return n}function h(e,n){return"boolean"==typeof e?e:"object"==typeof e&&e&&{}.hasOwnProperty.call(e,n)?e[n]:!!e}function b(e,n){if(!e)return null;let t=e;return a(t,n)?t=t[n]:a(t,"")&&(t=t[""]),Array.isArray(t)?t:[t]}function m(e,n){if(!e)return null;let t=e;return a(t,n)?t=t[n]:a(t,"")&&(t=t[""]),Array.isArray(t)?t:[t]}!function(){const e=s.emitWarning;s.emitWarning=function(...n){var t,r;const[o,i]=n;i&&"object"==typeof i&&"DeprecationWarning"===(null==i?void 0:i.type)&&null!=i&&null!=(t=i.code)&&t.startsWith("stylelint:")&&(o&&"string"==typeof o&&null!=o&&o.includes(l)||null!=i&&null!=(r=i.detail)&&r.includes(l))||e.apply(s,n)}}();const{utils:x}=e,v={url:"https://github.com/AndyOGo/stylelint-declaration-strict-value/blob/master/README.md",fixable:!0},F=x.ruleMessages(l,{expected:function(e,n,t){return`Expected ${e} for "${n}" of "${t}"`},customExpected:function(e,n,t,r){return r.replace("${types}",e).replace("${value}",n).replace("${property}",t)},failedToFix:function(e,n,t){return e&&("string"==typeof e||e instanceof Error)?"string"==typeof e?e:e.message:`Property "${t}" with value "${n}" can't be autofixed`}}),w=/^(?:@|\$|--).+$/,$=/^-?(?:@.+|(?:(?:[a-zA-Z_-]|[^\x20-\x7F])+(?:[a-zA-Z0-9_-]|[^\x20-\x7F])*\.)?\$.+|var\(\s*--[\s\S]+\))$/,j=/^(?!var\(\s*--)[\s\S]+\([\s\S]*\)$/,A=/^\/(.*)\/([a-zA-Z]*)$/,O=/color/,V=e=>A.test(e),E=e=>{const[n,t]=(e=>e.match(A).slice(1))(e);return new RegExp(n,t)},k=e=>V(`${e}`)?E(`${e}`):new RegExp(`^${e}$`),S=(e,s,a={})=>(c,f)=>{if(f&&f.stylelint&&f.stylelint.customMessages&&f.stylelint.customMessages[l]&&delete f.stylelint.customMessages[l],!x.validateOptions(f,l,{actual:e,possible:p},{actual:s,possible:g,optional:!0}))return;Array.isArray(e)||(e=[e]);const y=i({},u,s),{ignoreVariables:v,ignoreFunctions:A,ignoreKeywords:S,ignoreValues:R,message:K,disableFix:P,autoFixFunc:L,expandShorthand:M,recurseLonghand:N}=y,W=function(e,n,t){if("function"==typeof e)return e;if("string"==typeof e){let n;try{n=require.resolve(e)}catch(t){n=require.resolve(o.join(process.cwd(),e))}return require(n)}return!n&&t&&console.warn(`No \`autoFix\` function provided, consider using \`disableFix\` for "${l}"`),null}(L,P,a.fix),q=S?{}:null,z=R?{}:null;let D;if(v){const e=[];c.walkAtRules("value",n=>{const{params:t}=n,r=t.split(":")[0].trim();e.push(r)}),D=new RegExp(`^-?(:?${e.join("|")})$`)}e.forEach(e=>{let o=e;function s(n,t,o,s=!1){const{value:i,prop:u}=n,p=o||i;let g=!1,w=!1,V=!1,E=!1;if(v&&h(v,e)&&(g=$.test(p)||D.test(p)),A&&!g&&h(A,e)&&(w=j.test(p)),s&&(!v||v&&!g)&&(!A||A&&!w)&&!0!==((e,n)=>O.test(e)&&"transparent"===n||$.test(n)||j.test(n)||r(e,n))(t,o))return!1;if(S&&(!g||!w)){let n=q[e];if(!n){const t=b(S,e);t&&(n=new RegExp(`^${t.join("$|^")}$`),q[e]=n)}n&&(V=n.test(p))}if(R&&(!g||!w||!V)){let n=z[e];if(!n){const t=m(R,e);t&&(n=t.map(k),z[e]=n)}n&&(E=n.filter(e=>e.test(p)).length>0)}if(!(g||w||V||E)){const r=function(e,n){const{ignoreVariables:t,ignoreFunctions:r,ignoreKeywords:o,ignoreValues:s}=e,i=[];return t&&i.push("variable"),r&&i.push("function"),o&&b(o,n)&&i.push("keyword"),-1===i.indexOf("keyword")&&s&&m(s,n)&&i.push("keyword"),i}(y,e);if(a.fix&&!P&&W)try{const e=W(n,{validVar:g,validFunc:w,validKeyword:V,validValue:E,longhandProp:t,longhandValue:o},c,y);e&&(n.value=e)}catch(e){const{raws:t}=n,r=n.source.start;x.report({ruleName:l,result:f,node:n,line:r.line,column:r.column+u.length+t.between.length,message:F.failedToFix(e,p,u)})}else{const{raws:e}=n,t=n.source.start;x.report({ruleName:l,result:f,node:n,line:t.line,column:t.column+u.length+e.between.length,message:K?F.customExpected(d(r),p,u,K):F.expected(d(r),p,u)})}return!0}return!1}V(o)&&(o=E(o)),c.walkDecls(function(e){const{value:r,prop:i}=e;if(w.test(i))return;const l=M&&n.isShorthand(i);if(i===o||!l&&o instanceof RegExp&&o.test(i)){const n=t.space(r);if(n.length>1){let t=!1;n.forEach(n=>{t||(t=s(e,i,n))})}else s(e)}else if(l){const t=n.expand(i,r,N);let l=!1;Object.keys(t).forEach(n=>{const r=t[n];!l&&(n===o||o instanceof RegExp&&o.test(n))&&(l=s(e,n,r,!0))})}})})};S.primaryOptionArray=!0,S.ruleName=l,S.messages=F,S.meta=v;const R=e.createPlugin(l,S);export{R as default,F as messages,v as meta,S as rule,l as ruleName};
//# sourceMappingURL=index.modern.mjs.map
